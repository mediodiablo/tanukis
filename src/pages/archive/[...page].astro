---
import type { GetStaticPaths } from 'astro'
import Layout from '@layouts/Layout.astro'
import { getSortedPosts } from '@utils'
import PostPreviewsWithYear from '@components/PostPreviewsWithYearMinimal.astro'
import Pagination from '@components/Pagination.astro'
import BlockHeader from '@components/BlockHeader.astro'
import siteConfig from '../../site.config'

// Note: Pagination like '/', '/2', '/3' only works with spread param like [...page]
export const getStaticPaths = (async ({ paginate }) => {
  const sortedPosts = await getSortedPosts()
  return paginate(sortedPosts, { pageSize: siteConfig.pageSizeArchive })
}) satisfies GetStaticPaths

const { page } = Astro.props
---

<Layout title="archivo" description="todos los posts en el archivo">
  <BlockHeader>los arch.chivos</BlockHeader>
  <PostPreviewsWithYear posts={page.data} />
  <Pagination
    prevLink={page.url.prev ? page.url.prev : undefined}
    prevText="posts recientes"
    nextLink={page.url.next ? page.url.next : undefined}
    nextText="posts viejos"
  />
</Layout>
